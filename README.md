# Умный бот и сообщество в [VK](vk.com)
Бот и сообщество, отвечают на твои вопросы, распознают речь с помощью нейросети.

![Запись экрана от 2025-05-13 16-09-33](https://github.com/user-attachments/assets/f925f99f-d46d-454e-b2b5-d119df97de7f)

[Телеграм-бот - badcomrad_bot](https://t.me/badcomrad_bot)\
[ВК-сообщество - club230426579](https://vk.com/club230426579)
## Как установить
Python3 должен быть уже установлен. Затем используйте `pip` (или `pip3`, есть конфликт с Python2) для установки зависимостей:
```
pip install -r requirements.txt
```
## Окружения
Создать двух ботов и получить `TG_TOKEN` и `LOGGER_TOKEN` у [Отца Ботов](https://telegram.me/BotFather). Один служит для общения с нейросетью, а второй для направления сообщений о логах (работоспособность бота).\
Создать [проект в DialogFlow](https://cloud.google.com/dialogflow/es/docs/quick/setup).\
Создать [агента в DialogFlow](https://cloud.google.com/dialogflow/es/docs/quick/build-agent). Получить идентификатор `PROJECT_ID`.\
Необходимо [Включить API](https://cloud.google.com/dialogflow/es/docs/quick/setup#api) произвести [установку](https://cloud.google.com/sdk/docs/install) и [инициализацию gcloud CLI](https://cloud.google.com/sdk/docs/initializing), тем самым получить файл с настройками `credentials.json`.\
В переменной `GOOGLE_APPLICATION_CREDENTIALS` необходимо указать путь до файла `credentials.json`.\
`TG_CHAT_ID` - это id куда будет бот отправлять сообщения о результатах проверки и логов.\
Вы можете определить свой id через другого бота [@userinfobot](@userinfobot). Пропишите `/start` и он выдаст ваш id.
## Переменные окружения
```
TG_TOKEN=ВАШ_БОТ_ТОКЕН
PROJECT_ID=ВАШ_ID
LANGUAGE=(можно указать стандартный)en-EN
VK_TOKEN=ВАШ_ТОКЕН_ВК
GOOGLE_APPLICATION_CREDENTIALS=путь_до_файла_credentials.json
LOGGER_TOKEN=ВАШ_ТОКЕН_API
TG_CHAT_ID=ВАШ_ID
PATH_INTENT=путь_до_намерений(слов, вопросов)
```
### Как получить
1. Создай файл .env в корневом каталоге проекта, если он ещё не существует. Обычно это делается в корневой папке проекта, где находится основной исполняемый файл или файл конфигурации.

2. Откройте файл .env в текстовом редакторе и добавьте в него переменные окружения, как показано выше. Убедитесь, что переменные и их значения разделены знаком = без пробелов.

3. Убедитесь в установке с файла `requirements.txt` библиотеки `python-dotenv` для загрузки переменных окружения из файла `.env`.

Теперь у вас должен быть файл `.env`, содержащий все необходимые переменные окружения для корректной работы.
## Скрипты и их запуск
### `tg_bot.py`
```
python3 tg_bot.py
```
скрипт запускает телеграм-бота, который обучается и общается через [DialoFlow](https://dialogflow.cloud.google.com/).
### `vk_bot.py`
```
python3 vk_bot.py
```
скрипт запускает ВК-сообщество, в котором обучение и общение происходит через [DialoFlow](https://dialogflow.cloud.google.com/).
### `dialog_flow.py`
```
python3 dialog_flow.py
```
данный скрипт уже по подготовленным терминам файла `intents.json` обучает [DialogFlow](https://dialogflow.cloud.google.com/) к определенным вопросам и ответам.
### `tg_logger`
Обработчик логов. Не требуется в запуске
## Загрузка вопросов и ответов для обучения нейросети
Загрузка вопросов и ответов производится автоматически после запуска скрипта `dialog_flow.py`.\
Возможен вариант заносить свои вопросы и ответы в файл `intents.json` дополняя или, в случае необходимости, заменяя его:
```json
{
  "Приветствие": {
    "questions": [
      "Хай",
      "Здарова",
      "Пиветули",
      "Дратути"
    ],
    "answer": "Ну приветули, человечешка"
  }
}
```
## Цель проекта
Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).